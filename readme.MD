# MicroserviÃ§o com RabbitMQ ğŸ‡

Este projeto Ã© um exemplo de aplicaÃ§Ã£o de microserviÃ§o utilizando RabbitMQ como serviÃ§o de fila. Ele foi desenvolvido em TypeScript e consiste em dois microserviÃ§os: "payment" ğŸ’° e "ticket" ğŸŸï¸. Esses microserviÃ§os interagem por meio de eventos e filas, demonstrando um cenÃ¡rio comum em arquiteturas de microsserviÃ§os.

## PrÃ©-requisitos ğŸ“‹

Antes de comeÃ§ar, verifique se vocÃª possui os seguintes requisitos instalados em seu ambiente de desenvolvimento:

- Node.js (versÃ£o 18.x ou superior) ğŸš€
- Yarn Package Manager ğŸ“¦
- RabbitMQ (servidor de fila) ğŸ‡

## InstalaÃ§Ã£o ğŸ’»

Siga as etapas abaixo para configurar e executar o projeto em seu ambiente local.

1. Clone o repositÃ³rio para o seu diretÃ³rio de preferÃªncia:

   ```shell
   git clone https://github.com/kelwinv/microservices-with-RabbitMQ
   ```

2. Acesse o diretÃ³rio do projeto:

   ```shell
   cd microservices-with-RabbitMQ
   ```

3. Instale as dependÃªncias do projeto:

   ```shell
   yarn install
   ```
   
5. ConfiguraÃ§Ã£o do PostgreSQL:

   - Certifique-se de que o PostgreSQL esteja instalado e em execuÃ§Ã£o no seu ambiente.
   - Verifique se as configuraÃ§Ãµes de conexÃ£o com o PostgreSQL estÃ£o corretas nos arquivos dentro de `src/repository` dos diretÃ³rios `payment` e `ticket`.
   - Por padrÃ£o, os servidores estÃ£o esperando uma conexÃ£o com o PostgreSQL na rota `postgres://postgres:docker@localhost:5432/app`.
   - Certifique-se de substituir `postgres:docker` pelo seu usuÃ¡rio e senha do PostgreSQL,`localhost:5432` pela rota correta do seu servidor e `app` pelo seu banco.

4. ConfiguraÃ§Ã£o do RabbitMQ:

   - Certifique-se de que o RabbitMQ esteja instalado e em execuÃ§Ã£o no seu ambiente.
   - Verifique se as configuraÃ§Ãµes do RabbitMQ estÃ£o corretas nos arquivos `src/infra/queue/RabbitMQAdapter.ts` dos diretÃ³rios `payment` e `ticket`.

5. Execute o microserviÃ§o de pagamento:

   ```shell
   cd payment
   yarn start
   ```

6. Em outro terminal, execute o microserviÃ§o de ingressos:

   ```shell
   cd ticket
   yarn start
   ```

7. Agora, os microserviÃ§os estÃ£o em execuÃ§Ã£o e prontos para receber e processar eventos por meio da fila.

## UtilizaÃ§Ã£o ğŸš€

VocÃª pode interagir com os microserviÃ§os atravÃ©s de APIs REST fornecidas pelos endpoints expostos pelos servidores.

- MicroserviÃ§o de Ingressos (Ticket):

  - Endpoint: `http://localhost:3333/purchase_ticket`
  - MÃ©todo: POST
  - Corpo da solicitaÃ§Ã£o:

    ```json
    {
      "eventId": "ID do evento",
      "email": "seu-email@example.com",
      "creditCardToken": "Token do cartÃ£o de crÃ©dito"
    }
    ```

Certifique-se de substituir "ID do evento", "seu-email@example.com" e "Token do cartÃ£o de crÃ©dito" pelos valores apropriados ao realizar as solicitaÃ§Ãµes.

## ContribuiÃ§Ã£o ğŸ¤

ContribuiÃ§Ãµes sÃ£o bem-vindas! Se vocÃª deseja contribuir com este projeto, siga as etapas abaixo:

1. FaÃ§a um fork do repositÃ³rio
2. Crie uma branch para a sua contribuiÃ§Ã£o: `git checkout -b minha-contribuicao`
3. FaÃ§a as alteraÃ§Ãµes desejadas e faÃ§a commit das mes

mas: `git commit -m 'Minha contribuiÃ§Ã£o'`
4. Envie as alteraÃ§Ãµes para o seu fork: `git push origin minha-contribuicao`
5. Abra um pull request no repositÃ³rio original

## LicenÃ§a ğŸ“„

Este projeto estÃ¡ licenciado sob a [MIT License](LICENSE).